
Currently one test passes locally (macbook) but fails on CI (Ubuntu).
Eg see
https://github.com/cyber-dojo/runner/actions/runs/19404644389/job/55517413049

The test is a multi-os test, so fails three times, for [Debian, Ubuntu, Alpine]
On Alpine it is...

Failure:
ContainerPropertiesTest#test_
id='3A8D97'
os=Alpine
'multiple container properties' [/runner/test/client/container_properties_test.rb:67]
Minitest::Assertion: permission.
Expected: "drwxrwxrwt"
  Actual: "drwxr-xr-x"


To run locally:
$ make image_client && ./bin/run_tests.sh client 3A8D97
And it passes (Macbook M5, Tahoe 26.1, docker desktop 4.50.0 (209931))

This is the assert 

  assert_equal 'drwxrwxrwt', created_file('dir.stat.A'), :permission

dir.stat.A is a generated file, created with the line:

  "stat --printf='%A' #{sandbox_dir} > #{sandbox_dir}/dir.stat.A"

The sandbox dir is created in runner.rb with

  TMP_FS_SANDBOX_DIR = "--tmpfs #{Sandbox::DIR}:exec,size=50M,uid=#{UID},gid=#{GID}"
  Sandbox::DIR = '/sandbox'

drwxrwxrwt means
d      its a dir
rwx.   permissions for owner of dir    
rwx.   permissions for user-group owning the dir
rwt.   permissions for all others

r=read
w=write
x=execute
t=sticky-bit, everybody can execute
T=sticky-bit, not everybody can execute

A sticky bit is a permission bit that is set on a directory that 
allows only the owner of the file within that directory, the owner of 
the directory or the root user to delete or rename the file. No other 
user has the needed privileges to delete the file created by some other user.

Locally, to confirm:
$ docker run --entrypoint="" --init --interactive --tty --tmpfs /sandbox:exec,size=50M,uid=41966,gid=51966 --user=41966:51966 --rm cyberdojo/runner:latest bash
$ 4bd874912c55:/$ ls -al /
drwxrwxrwt    2 41966    51966           40 Nov 16 11:56 sandbox

So the permissions for the owner have not changed.


